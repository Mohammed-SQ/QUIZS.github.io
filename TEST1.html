<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz 1</title>
    <style>
        /* Add your quiz-specific styles here */
        .quiz-container {
            text-align: center;
            max-width: 600px;
            margin: auto;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 10px;
            background-color: #f9f9f9;
        }

        #question-container {
            margin-bottom: 20px;
        }

        button {
            margin: 5px;
            padding: 10px;
            font-size: 16px;
        }

        .correct-answer {
            background-color: lightgreen !important;
        }

        .incorrect-answer {
            background-color: #ff9999 !important;
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <h1>Quiz 1</h1>
        <div id="question-container">
            <h2 id="question"></h2>
            <div id="choices"></div>
        </div>
        <div id="result-container">
            <p id="result"></p>
            <button id="next-btn" onclick="nextQuestion()" style="display: none;">Next</button>
        </div>

        <script>
            const allQuestions = [
                { text: 'What does HTML stand for?', choices: ['Hyper Text Markup Language', 'High Tech Machine Learning', 'Hyper Transfer Multimedia Language'], answer: 1 },
                { text: 'Which tag is used to create a hyperlink in HTML?', choices: ['Image', 'Hyperlink', 'Paragraph'], answer: 2 },
                { text: 'Which HTML element is used to define the structure of an HTML document, including the head and body sections?', choices: ['body', 'head', 'html'], answer: 3 }
            ];

            const questions = getRandomQuestions(allQuestions, 3);
            let currentQuestion = 0, score = 0, quizStartTime, bestTime = parseFloat(localStorage.getItem('bestTime')) || Number.MAX_SAFE_INTEGER;

            function startQuiz() { quizStartTime = new Date().getTime(); }
            function stopQuiz() { return ((new Date().getTime() - quizStartTime) / 1000).toFixed(2); }

            function initializeQuiz() { showQuestion(); }

            function getRandomQuestions(allQuestions, count) {
                const shuffledQuestions = [...allQuestions].sort(() => Math.random() - 0.5);
                return shuffledQuestions.slice(0, count);
            }

            function showQuestion() {
                const currentQuestionObj = questions[currentQuestion];
                document.getElementById('question').innerText = currentQuestionObj.text;

                const choicesHtml = currentQuestionObj.choices.map((choice, index) =>
                    `<button onclick="checkAnswer(${index + 1})">${choice}</button>`
                ).join('');

                document.getElementById('choices').innerHTML = choicesHtml;
            }

            function checkAnswer(selectedChoice) {
                if (currentQuestion === 0) startQuiz();

                const selectedButton = document.querySelectorAll('#choices button')[selectedChoice - 1];
                const correctAnswerIndex = questions[currentQuestion].answer - 1;
                const correctAnswerButton = document.querySelectorAll('#choices button')[correctAnswerIndex];

                if (selectedChoice === questions[currentQuestion].answer) {
                    score++;
                    document.getElementById('result').innerText = 'Correct!';
                    selectedButton.classList.add('correct-answer');
                } else {
                    correctAnswerButton.classList.add('correct-answer');
                    selectedButton.classList.add('incorrect-answer');
                    document.getElementById('result').innerText = `Incorrect. Correct answer: ${questions[currentQuestion].choices[correctAnswerIndex]}`;
                }

                document.getElementById('choices').style.pointerEvents = 'none';
                document.getElementById('next-btn').style.display = 'block';
                document.getElementById('result-container').style.display = 'block';

                if (currentQuestion === questions.length - 1) {
                    document.getElementById('next-btn').style.display = 'none';
                    showFinalScore();
                    // Display "Go Back" and "Reset Best Time" buttons after finishing all questions
                    document.getElementById('buttons-container').style.display = 'block';
                }
            }

            function nextQuestion() {
                currentQuestion++;

                if (currentQuestion < questions.length) {
                    showQuestion();
                    resetQuizState();
                } else {
                    showFinalScore();
                }
            }
            function resetBestTime() {
        localStorage.removeItem('bestTime');
        alert('Best time has been reset.');
        showQuestion();  // Reset the quiz after resetting best time
    }
            function showFinalScore() {
                const quizElapsedTime = stopQuiz();

                if (score === questions.length) {
                    if (quizElapsedTime < bestTime) {
                        localStorage.setItem('bestTime', bestTime = parseFloat(quizElapsedTime));
                    }
                }

                const resultContainer = document.getElementById('result-container');
                resultContainer.innerHTML = `<p>Final Score: ${score}/${questions.length}</p>`;
                resultContainer.innerHTML += `<p>Time taken: ${quizElapsedTime} seconds</p>`;

                if (score === questions.length) {
                    resultContainer.innerHTML += `<p>Best Time: ${bestTime} seconds</p>`;
                }

                // Set the final score in localStorage without buttons
                localStorage.setItem('finalScore', resultContainer.innerHTML);
            }

            function resetQuizState() {
                document.getElementById('choices').style.pointerEvents = 'auto';
                document.getElementById('result').innerText = '';
                document.getElementById('result-container').style.display = 'none';
                document.getElementById('next-btn').style.display = 'none';
                clearAnswerStyles();
            }

            function clearAnswerStyles() {
                document.querySelectorAll('#choices button').forEach(button => button.classList.remove('correct-answer', 'incorrect-answer'));
            }

            initializeQuiz();
        </script>
        <!-- Display "Go Back" and "Reset Best Time" buttons after finishing all questions -->
        <div id="buttons-container" style="display: none;">
            <a href="index.html"><button id="go-back-btn">Go Back</button></a>
            <button id="reset-best-time-btn" onclick="resetBestTime()">Reset Best Time</button>
        </div>
    </div>
</body>
</html>
